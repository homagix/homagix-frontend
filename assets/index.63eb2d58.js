var V=Object.defineProperty,Z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$=(t,e)=>{for(var n in e||(e={}))q.call(e,n)&&A(t,n,e[n]);if(T)for(var n of T(e))K.call(e,n)&&A(t,n,e[n]);return t},N=(t,e)=>Z(t,W(e));import{c as J,u as Q,d as k,a as I,r as R,o as u,b as _,e as o,f,w as g,g as p,h as U,n as X,i as h,j as z,t as b,k as L,l as Y,F as v,m as S,p as F,q as ee,s as te,v as ne,x as se,y as oe,z as re,A as ae,B as ie,C as ce,D as ue,E as le,O as _e,G as de}from"./vendor.6fd86627.js";const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};pe();const he={user:null},me={SET_USER(t,e){t.user=e}};var P=$({SET_ERROR(t,e){t.error=e},LOADED_DISHES(t,e){t.dishes=e.dishes},LOADED_INGREDIENTS(t,e){t.ingredients=e.ingredients}},me);const j=localStorage.getItem("basePath")||"https://homagix-server.dilab.co";function fe(t){return j+"/images/"+t}async function w(t,e,n={},r={}){var c;["post","put","patch"].includes(t.toLowerCase())&&Object.keys(n).length?(r.body=JSON.stringify(n),r.headers=N($({},r.headers||{}),{"Content-Type":"application/json"})):Object.keys(n).length&&(e+=`?${new URLSearchParams(n).toString()}`),r.method=t;const s=await fetch(j+e,r),i=(c=s.headers.get("content-type"))!=null&&c.match(/json/)?await s.json():await s.text();if(!s.ok){const l={message:`${t} ${e} -> ${s.status}`,details:{request:`${t} ${e}`,status:s.status,content:i}};throw console.error(l),l}return i}async function ge(){return await w("get","/dishes")}async function ve(){return await w("get","/ingredients")}async function ye(t){return await w("post","/accounts",{firstName:t})}async function be(t,e){return await w("get","/accounts/"+t+"/access-codes/"+e)}async function ke(){return await w("delete","/session")}function O(t,e){return async(n,...r)=>{try{await t(n,...r)}catch(s){n.dispatch(C.ERROR_OCCURED,{message:e,details:s})}}}var G={ERROR_OCCURED(t,e){t.commit(y.SET_ERROR,e)},CLEAR_ERROR(t){t.commit(y.SET_ERROR,null)},LOAD_DISHES:O(async t=>t.commit(y.LOADED_DISHES,await ge()),"Rezepte konnten nicht geladen werden"),LOAD_INGREDIENTS:O(async t=>t.commit(y.LOADED_INGREDIENTS,await ve()),"Zutaten konnten nicht geladen werden"),REGISTER_USER:O(async(t,e)=>t.commit(y.SET_USER,await ye(e)),"Die Registrierung war leider nicht erfolgreich. Bitte noch einmal probieren!"),LOGOUT:O(async t=>{await ke(),t.commit(y.SET_USER,null)},"Logout fehlgeschlagen")},$e={};const Re=$({error:null,dishes:[],ingredients:[]},he),B=J({strict:{}.NODE_ENV!=="production",state:Re,mutations:P,actions:G,getters:$e});function H(t){return Object.assign({},...Object.keys(t).map(e=>({[e]:e})))}const y=H(P),C=H(G);function x(){return Q()}var D=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const Ee={class:"navbar-start"},Se=h(" Recipes "),Ce={class:"navbar-end"},we={class:"navbar-item"},xe={class:"buttons"},De=h(" Registrieren "),Oe=h("Abmelden"),Le=k({props:{open:null},setup(t){const e=t,n=x(),r=I(()=>"navbar-menu"+(e.open?" is-active":""));return(s,i)=>{const c=R("router-link");return u(),_("div",{id:"navbar",class:X(p(r))},[o("div",Ee,[f(c,{class:"navbar-item",to:"/recipes"},{default:g(()=>[Se]),_:1})]),o("div",Ce,[o("div",we,[o("div",xe,[p(n).state.user?(u(),U(c,{key:1,to:"/logout",class:"button is-light"},{default:g(()=>[Oe]),_:1})):(u(),U(c,{key:0,to:"/register",class:"button is-primary"},{default:g(()=>[De]),_:1}))])])])],2)}}});var Ie=D(Le,[["__scopeId","data-v-40eac8f2"]]);const Ne={class:"navbar-brand"},Te=o("h1",{class:"title"},"Homagix",-1),Ae={key:0,class:"username"},Ue=["onClick"],Be=o("span",{"aria-hidden":"true"},null,-1),ze=o("span",{"aria-hidden":"true"},null,-1),Fe=o("span",{"aria-hidden":"true"},null,-1),Pe=[Be,ze,Fe],je={key:0,class:"error-container"},Ge=k({setup(t){const e=x(),n=I(()=>e==null?void 0:e.state.error),r=z(!1);e.dispatch(C.LOAD_DISHES),e.dispatch(C.LOAD_INGREDIENTS);function s(){e.dispatch(C.CLEAR_ERROR)}function i(l){l.target&&(r.value=!r.value)}function c(){r.value=!1}return(l,a)=>{const m=R("router-link"),d=R("router-view");return u(),_(v,null,[o("nav",{class:"navbar is-warning",role:"navigation","aria-label":"main navigation",onClick:c},[o("div",Ne,[f(m,{to:"/",class:"navbar-item"},{default:g(()=>[Te]),_:1}),p(e).state.user?(u(),_("div",Ae,b(p(e).state.user.name),1)):L("",!0),o("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false",onClick:Y(i,["stop"])},Pe,8,Ue)]),f(Ie,{open:r.value},null,8,["open"])]),p(n)?(u(),_("div",je,[o("span",{onClick:s},"\xD7"),h(" "+b(p(n).message),1)])):L("",!0),o("section",{class:"section",onClick:c},[f(d)])],64)}}});const He=t=>(ee("data-v-71246241"),t=t(),te(),t),Me=He(()=>o("div",{class:"title is-4"},"Rezepte",-1)),Ve={id:"recipes-list"},Ze=["onClick"],We=k({setup(t){const e=x(),n=S(),r=I(()=>{var c;const i=(c=e.state.dishes)==null?void 0:c.filter(l=>!l.alwaysOnList);return i==null?void 0:i.sort((l,a)=>l.name.localeCompare(a.name))});function s(i){n.push({name:"recipe",params:{id:i}})}return(i,c)=>{const l=R("o-icon");return u(),_(v,null,[Me,o("ul",Ve,[(u(!0),_(v,null,F(p(r),a=>(u(),_("li",{key:a.id,onClick:()=>s(a.id)},[f(l,{icon:"utensils"}),h(" "+b(a.name),1)],8,Ze))),128))])],64)}}});var qe=D(We,[["__scopeId","data-v-71246241"]]);const Ke={};function Je(t,e){return u(),_("button",null,[ne(t.$slots,"default",{},void 0,!0)])}var E=D(Ke,[["render",Je],["__scopeId","data-v-4e04e4f1"]]);const Qe={key:0},Xe={class:"title is-4"},Ye=["src"],et={class:"wrapper",id:"ingredient-list"},tt={class:"number"},nt=h("Zur\xFCck"),st=k({setup(t){const e=x(),n=se(),r=S(),s=I(()=>e.state.dishes.find(a=>a.id===n.params.id));function i(){var a;return(a=s.value)==null?void 0:a.items.map(m=>{var d;return N($({},(d=e.state.ingredients)==null?void 0:d.find(M=>M.id===m.id)),{amount:m.amount})})}function c(){r.push({name:"recipes"})}function l(a){return fe(a.image)}return(a,m)=>p(s)?(u(),_("section",Qe,[o("div",Xe,b(p(s).name),1),p(s).image?(u(),_("img",{key:0,src:l(p(s))},null,8,Ye)):L("",!0),o("div",et,[(u(!0),_(v,null,F(i(),d=>(u(),_(v,{key:d.id},[o("span",tt,b(d.amount),1),o("span",null,b(d.unit),1),o("span",null,b(d.name),1)],64))),128))]),o("p",null,b(p(s).recipe),1),f(E,{onClick:c},{default:g(()=>[nt]),_:1})])):L("",!0)}});var ot=D(st,[["__scopeId","data-v-43dbb0a0"]]);const rt={},at=o("div",{class:"title is-4"},"Hast du dich verirrt?",-1),it=o("p",null,"Die angeforderte Seite existiert leider nicht.",-1),ct=h("Bring mich in Sicherheit!");function ut(t,e){const n=R("router-link");return u(),_(v,null,[at,it,f(n,{to:"/"},{default:g(()=>[ct]),_:1})],64)}var lt=D(rt,[["render",ut]]);const _t=o("h2",null,"Neu registrieren",-1),dt=o("p",null," Hier kannst du deinem Zugang einen Namen (z.B. deinen Vornamen oder auch einen Phantasienamen) geben. Wir sprechen dich dann k\xFCnftig damit an. ",-1),pt=h(" Name "),ht={class:"button-list"},mt=h("Registrieren"),ft=h("Abbrechen"),gt=k({setup(t){const e=S(),n=x();let r=z("");async function s(){await n.dispatch(C.REGISTER_USER,r.value),e.push("/my")}function i(){e.back()}return(c,l)=>(u(),_(v,null,[_t,dt,o("label",null,[pt,oe(o("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>ae(r)?r.value=a:r=a)},null,512),[[re,p(r)]])]),o("div",ht,[f(E,{id:"register-button",onClick:s},{default:g(()=>[mt]),_:1}),f(E,{id:"cancel-button",onClick:i},{default:g(()=>[ft]),_:1})])],64))}});const vt=o("h2",null,"Willkommen!",-1),yt=o("p",null," Du bist bereits registriert? Um deine Daten zu sch\xFCtzen, musst du den Bookmark verwenden, den du nach der Registrierung erhalten hast. ",-1),bt=h("Du willst dich neu registrieren? Dann geht's "),kt=h("hier entlang"),$t={class:"button-list"},Rt=h("Abbrechen"),Et=k({setup(t){const e=S();return(n,r)=>{const s=R("router-link");return u(),_(v,null,[vt,yt,o("p",null,[bt,f(s,{to:"/register"},{default:g(()=>[kt]),_:1})]),o("div",$t,[f(E,{onClick:p(e).back},{default:g(()=>[Rt]),_:1},8,["onClick"])])],64)}}});const St=o("h2",null,"Ciao!",-1),Ct=o("p",null,"Wir hoffen, Dich bald wiederzusehen!",-1),wt={class:"button-list"},xt=h("Zu den Rezepten"),Dt=k({setup(t){const e=S();return(n,r)=>(u(),_(v,null,[St,Ct,o("div",wt,[f(E,{id:"recipes-button",onClick:r[0]||(r[0]=s=>p(e).push("/recipes"))},{default:g(()=>[xt]),_:1})])],64))}}),Ot=o("h2",null,"Dein Zugang",-1),Lt=o("p",null," Speichere diese Seite als Bookmark oder Favorit, dann kommst du einfach wieder hierher zur\xFCck, ohne dich einloggen zu m\xFCssen. ",-1),It=o("p",null,"Da jede:r mit dem Bookmark hierher kommt, solltest du diesen Link nicht an andere weiter geben.",-1),Nt={class:"button-list"},Tt=h("Zu den Rezepten"),At=k({setup(t){const e=S();function n(){e.push("/recipes")}return(r,s)=>(u(),_(v,null,[Ot,Lt,It,o("div",Nt,[f(E,{id:"recipes-button",onClick:n},{default:g(()=>[Tt]),_:1})])],64))}});function Ut(t){function e(a,m){document.cookie=`token=${a};path=/homagix-frontend/;max-age=${m}`}function n(){const a=document.cookie.match(/token=([\w.]+)/);if((a==null?void 0:a.length)===2){const{sub:m,firstName:d}=ie(a[1]);return{id:m,name:d}}return null}function r(){e("",-1),t.commit(y.SET_USER,null)}async function s(a){try{const{token:m}=await be(a.params.id,a.params.code);if(m){e(m,7200);const d=n();return d&&(d.accessCode=a.params.code),t.commit(y.SET_USER,d),!0}}catch(m){console.error(m)}return"/login"}function i(){return t.state.user?"/user/"+t.state.user.id+"/"+t.state.user.accessCode:"/login"}const c=[{path:"/register",component:gt},{path:"/login",component:Et},{path:"/logout",component:Dt,beforeEnter:r},{path:"/user/:id/:code",component:At,beforeEnter:s},{path:"/my",redirect:i}];function l(){if(!t.state.user){const a=n();a&&t.commit(y.SET_USER,a)}}return{routes:c,beforeEach:l}}var Bt=t=>{const e=Ut(t),n=ce({history:ue("/homagix-frontend/"),routes:[{name:"home",path:"/",redirect:"/recipes"},{name:"recipes",path:"/recipes",component:qe},{name:"recipe",path:"/recipes/:id",component:ot},...e.routes,{path:"/:pathMatch(.*)*",component:lt}]});return n.beforeEach(e.beforeEach),n};le(Ge).use(B).use(Bt(B)).use(_e,$({customIconPacks:{fas:{sizes:{default:"",small:"fa-sm",medium:"fa-lg",large:"fa-2x"}}},iconPack:"fas"},de.exports.bulmaConfig)).mount("#app");
