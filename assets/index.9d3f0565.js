var H=Object.defineProperty,F=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||(e={}))V.call(e,n)&&k(t,n,e[n]);if(L)for(var n of L(e))B.call(e,n)&&k(t,n,e[n]);return t},v=(t,e)=>F(t,P(e));import{c as G,u as U,d as S,a as y,o as l,b as d,e as p,f as c,g as q,t as m,h as O,i as z,F as h,r as K,j as w,k as N,p as M,l as Z,m as J,n as W,q as Q,s as X}from"./vendor.578b05fc.js";const Y=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};Y();var C={SET_ERROR(t,e){t.error=e},LOADED_DISHES(t,e){t.dishes=e.dishes},LOADED_INGREDIENTS(t,e){t.ingredients=e.ingredients}};const b=localStorage.getItem("basePath")||"https://homagix-server.dilab.co";function ee(t){return b+"/images/"+t}async function $(t,e,n={},o={}){var a;["post","put","patch"].includes(t.toLowerCase())&&Object.keys(n).length?(o.data=JSON.stringify(n),o.headers=v(E({},o.headers||{}),{["Content Type"]:"application/json"})):Object.keys(n).length&&(e+=`?${new URLSearchParams(n).toString()}`),o.method=t;const s=await fetch(b+e,o),r=((a=s.headers.get("content-type"))==null?void 0:a.match(/json/))?await s.json():await s.text();if(!s.ok){const i={message:`${t} ${e} -> ${s.status}`,details:{request:`${t} ${e}`,status:s.status,content:r}};throw console.error(i),i}return r}async function te(){return await $("get","/dishes")}async function se(){return await $("get","/ingredients")}function I(t,e){return async(n,...o)=>{try{await t(n,...o)}catch(s){n.dispatch(g.ERROR_OCCURED,{message:e,details:s})}}}var A={ERROR_OCCURED(t,e){t.commit(f.SET_ERROR,e)},CLEAR_ERROR(t){t.commit(f.SET_ERROR,null)},LOAD_DISHES:I(async t=>t.commit(f.LOADED_DISHES,await te()),"Rezepte konnten nicht geladen werden"),LOAD_INGREDIENTS:I(async t=>t.commit(f.LOADED_INGREDIENTS,await se()),"Zutaten konnten nicht geladen werden")},ne={};const re={error:null,dishes:[],ingredients:[]},oe=G({strict:{}.NODE_ENV!=="production",state:re,mutations:C,actions:A,getters:ne});function x(t){return Object.assign({},...Object.keys(t).map(e=>({[e]:e})))}const f=x(C),g=x(A);function D(){return U()}const ae=c("div",{class:"title"},[c("h1",null,"Homagix")],-1),ce={key:0,class:"error-container"},ie={class:"content"},ue=S({setup(t){const e=D(),n=y(()=>e==null?void 0:e.state.error);e.dispatch(g.LOAD_DISHES),e.dispatch(g.LOAD_INGREDIENTS);function o(){e.dispatch(g.CLEAR_ERROR)}return(s,r)=>{const a=K("router-view");return l(),d(h,null,[ae,p(n)?(l(),d("div",ce,[c("span",{onClick:o},"\xD7"),q(" "+m(p(n).message),1)])):O("",!0),c("div",ie,[z(a)])],64)}}});var T=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n};const le=t=>(M("data-v-4c630fe6"),t=t(),Z(),t),de=le(()=>c("h2",null,"Rezepte",-1)),pe={id:"recipes-list"},_e=["onClick"],me=S({setup(t){const e=D();y(()=>e.state.dishes);const n=w(),o=y(()=>{var a;const r=(a=e.state.dishes)==null?void 0:a.filter(i=>!i.alwaysOnList);return r==null?void 0:r.sort((i,u)=>i.name.localeCompare(u.name))});function s(r){n.push({name:"recipe",params:{id:r}})}return(r,a)=>(l(),d(h,null,[de,c("ul",pe,[(l(!0),d(h,null,N(p(o),i=>(l(),d("li",{key:i.id,onClick:()=>s(i.id)},m(i.name),9,_e))),128))])],64))}});var he=T(me,[["__scopeId","data-v-4c630fe6"]]);const fe={key:0},ge=["src"],ye={class:"wrapper",id:"ingredient-list"},Re={class:"number"},Ee=S({setup(t){const e=D(),n=J(),o=w(),s=y(()=>e.state.dishes.find(u=>u.id===n.params.id));function r(){var u;return(u=s.value)==null?void 0:u.items.map(R=>{var _;return v(E({},(_=e.state.ingredients)==null?void 0:_.find(j=>j.id===R.id)),{amount:R.amount})})}function a(){o.push({name:"recipes"})}function i(u){return ee(u.image)}return(u,R)=>p(s)?(l(),d("section",fe,[c("h2",null,m(p(s).name),1),p(s).image?(l(),d("img",{key:0,src:i(p(s))},null,8,ge)):O("",!0),c("div",ye,[(l(!0),d(h,null,N(r(),_=>(l(),d(h,{key:_.id},[c("span",Re,m(_.amount),1),c("span",null,m(_.unit),1),c("span",null,m(_.name),1)],64))),128))]),c("p",null,m(p(s).recipe),1),c("button",{onClick:a},"Zur\xFCck")])):O("",!0)}});var ve=T(Ee,[["__scopeId","data-v-acf19428"]]),Oe=W({history:Q("/homagix-frontend/"),routes:[{name:"home",path:"/",redirect:"/recipes"},{name:"recipes",path:"/recipes",component:he},{name:"recipe",path:"/recipes/:id",component:ve}]});X(ue).use(oe).use(Oe).mount("#app");
