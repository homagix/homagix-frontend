var V=Object.defineProperty,Z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var T=(t,e,s)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,k=(t,e)=>{for(var s in e||(e={}))q.call(e,s)&&T(t,s,e[s]);if(A)for(var s of A(e))K.call(e,s)&&T(t,s,e[s]);return t},N=(t,e)=>Z(t,W(e));import{o as J,a as u,c as _,r as Q,d as $,u as S,b as z,e as o,w as X,v as Y,f as d,i as ee,g as h,h as f,F as v,j as p,k as E,l as te,m as ne,n as I,p as U,q as se,t as b,s as L,x as oe,y as F,z as re,A as ae,B as ie,C as ce,D as ue,E as le,O as _e,G as de}from"./vendor.0e239747.js";const pe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}};pe();function he(t=7200){return e=>{document.cookie=`token=${e};path=/homagix-frontend/;max-age=${e?t:-1}`}}function me(t){return e=>{if(e){const{sub:s,firstName:r,accessCode:n}=J(e);t.commit(y.SET_USER,{id:s,name:r,accessCode:n})}else t.commit(y.SET_USER,null)}}var w=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s};const fe={};function ge(t,e){return u(),_("button",null,[Q(t.$slots,"default",{},void 0,!0)])}var R=w(fe,[["render",ge],["__scopeId","data-v-4e04e4f1"]]);const ve=o("h2",null,"Neu registrieren",-1),ye=o("p",null," Hier kannst du deinem Zugang einen Namen (z.B. deinen Vornamen oder auch einen Phantasienamen) geben. Wir sprechen dich dann k\xFCnftig damit an. ",-1),be=p(" Name "),$e={class:"button-list"},ke=p("Registrieren"),Ee=p("Abbrechen"),Re=$({setup(t){const e=S(),s=D();let r=z("");async function n(){await s.dispatch(C.REGISTER_USER,r.value),e.push("/my")}function a(){e.back()}return(c,l)=>(u(),_(v,null,[ve,ye,o("label",null,[be,X(o("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=i=>ee(r)?r.value=i:r=i)},null,512),[[Y,d(r)]])]),o("div",$e,[h(R,{id:"register-button",onClick:n},{default:f(()=>[ke]),_:1}),h(R,{id:"cancel-button",onClick:a},{default:f(()=>[Ee]),_:1})])],64))}});const Se=o("h2",null,"Willkommen!",-1),Ce=o("p",null," Du bist bereits registriert? Um deine Daten zu sch\xFCtzen, musst du den Bookmark verwenden, den du nach der Registrierung erhalten hast. ",-1),we=p("Du willst dich neu registrieren? Dann geht's "),xe=p("hier entlang"),De={class:"button-list"},Oe=p("Abbrechen"),Le=$({setup(t){const e=S();return(s,r)=>{const n=E("router-link");return u(),_(v,null,[Se,Ce,o("p",null,[we,h(n,{to:"/register"},{default:f(()=>[xe]),_:1})]),o("div",De,[h(R,{onClick:d(e).back},{default:f(()=>[Oe]),_:1},8,["onClick"])])],64)}}});const Ie=o("h2",null,"Ciao!",-1),Ne=o("p",null,"Wir hoffen, Dich bald wiederzusehen!",-1),Ae={class:"button-list"},Te=p("Zu den Rezepten"),Ue=$({setup(t){const e=S();return(s,r)=>(u(),_(v,null,[Ie,Ne,o("div",Ae,[h(R,{id:"recipes-button",onClick:r[0]||(r[0]=n=>d(e).push("/recipes"))},{default:f(()=>[Te]),_:1})])],64))}}),Be=o("h2",null,"Dein Zugang",-1),ze=o("p",null," Speichere diese Seite als Bookmark oder Favorit, dann kommst du einfach wieder hierher zur\xFCck, ohne dich einloggen zu m\xFCssen. ",-1),Fe=o("p",null,"Da jede:r mit dem Bookmark hierher kommt, solltest du diesen Link nicht an andere weiter geben.",-1),Pe={class:"button-list"},je=p("Zu den Rezepten"),Ge=$({setup(t){const e=S();function s(){e.push("/recipes")}return(r,n)=>(u(),_(v,null,[Be,ze,Fe,o("div",Pe,[h(R,{id:"recipes-button",onClick:s},{default:f(()=>[je]),_:1})])],64))}}),P=localStorage.getItem("basePath")||"https://homagix-server.dilab.co";function He(t){return P+"/images/"+t}async function x(t,e,s={},r={}){var c;["post","put","patch"].includes(t.toLowerCase())&&Object.keys(s).length?(r.body=JSON.stringify(s),r.headers=N(k({},r.headers||{}),{"Content-Type":"application/json"})):Object.keys(s).length&&(e+=`?${new URLSearchParams(s).toString()}`),r.method=t;const n=await fetch(P+e,r),a=(c=n.headers.get("content-type"))!=null&&c.match(/json/)?await n.json():await n.text();if(!n.ok){const l={message:`${t} ${e} -> ${n.status}`,details:{request:`${t} ${e}`,status:n.status,content:a}};throw console.error(l),l}return a}async function Me(t){return await x("post","/accounts",{firstName:t})}async function Ve(t,e){return await x("get","/accounts/"+t+"/access-codes/"+e)}async function Ze(){return await x("delete","/session")}function We(t,e=[]){function s(){const i=document.cookie.match(/token=([\w.]+)/);e.forEach(m=>m(i?i[1]:void 0))}function r(){e.forEach(i=>i())}async function n(i){try{const{token:m}=await Ve(i.params.id,i.params.code);if(m)return e.forEach(g=>g(m)),!0}catch(m){console.error(m)}return"/login"}function a(){const i=t();return i?"/user/"+i.id+"/"+i.accessCode:"/login"}const c=[{path:"/register",component:Re},{path:"/login",component:Le},{path:"/logout",component:Ue,beforeEnter:r},{path:"/user/:id/:code",component:Ge,beforeEnter:n},{path:"/my",redirect:a}];function l(){t()||s()}return{routes:c,beforeEach:l}}const qe={user:null},Ke={SET_USER(t,e){t.user=e}};var j=k({SET_ERROR(t,e){t.error=e},LOADED_DISHES(t,e){t.dishes=e.dishes},LOADED_INGREDIENTS(t,e){t.ingredients=e.ingredients}},Ke);async function Je(){return await x("get","/dishes")}async function Qe(){return await x("get","/ingredients")}function O(t,e){return async(s,...r)=>{try{await t(s,...r)}catch(n){s.dispatch(C.ERROR_OCCURED,{message:e,details:n})}}}var G={ERROR_OCCURED(t,e){t.commit(y.SET_ERROR,e)},CLEAR_ERROR(t){t.commit(y.SET_ERROR,null)},LOAD_DISHES:O(async t=>t.commit(y.LOADED_DISHES,await Je()),"Rezepte konnten nicht geladen werden"),LOAD_INGREDIENTS:O(async t=>t.commit(y.LOADED_INGREDIENTS,await Qe()),"Zutaten konnten nicht geladen werden"),REGISTER_USER:O(async(t,e)=>t.commit(y.SET_USER,await Me(e)),"Die Registrierung war leider nicht erfolgreich. Bitte noch einmal probieren!"),LOGOUT:O(async t=>{await Ze(),t.commit(y.SET_USER,null)},"Logout fehlgeschlagen")},Xe={};const Ye=k({error:null,dishes:[],ingredients:[]},qe),B=te({strict:{}.NODE_ENV!=="production",state:Ye,mutations:j,actions:G,getters:Xe});function H(t){return Object.assign({},...Object.keys(t).map(e=>({[e]:e})))}const y=H(j),C=H(G);function D(){return ne()}const et={class:"navbar-start"},tt=p(" Recipes "),nt={class:"navbar-end"},st={class:"navbar-item"},ot={class:"buttons"},rt=p(" Registrieren "),at=p("Abmelden"),it=$({props:{open:null},setup(t){const e=t,s=D(),r=I(()=>"navbar-menu"+(e.open?" is-active":""));return(n,a)=>{const c=E("router-link");return u(),_("div",{id:"navbar",class:se(d(r))},[o("div",et,[h(c,{class:"navbar-item",to:"/recipes"},{default:f(()=>[tt]),_:1})]),o("div",nt,[o("div",st,[o("div",ot,[d(s).state.user?(u(),U(c,{key:1,to:"/logout",class:"button is-light"},{default:f(()=>[at]),_:1})):(u(),U(c,{key:0,to:"/register",class:"button is-primary"},{default:f(()=>[rt]),_:1}))])])])],2)}}});var ct=w(it,[["__scopeId","data-v-40eac8f2"]]);const ut={class:"navbar-brand"},lt=o("h1",{class:"title"},"Homagix",-1),_t={key:0,class:"username"},dt=["onClick"],pt=o("span",{"aria-hidden":"true"},null,-1),ht=o("span",{"aria-hidden":"true"},null,-1),mt=o("span",{"aria-hidden":"true"},null,-1),ft=[pt,ht,mt],gt={key:0,class:"error-container"},vt=$({setup(t){const e=D(),s=I(()=>e==null?void 0:e.state.error),r=z(!1);e.dispatch(C.LOAD_DISHES),e.dispatch(C.LOAD_INGREDIENTS);function n(){e.dispatch(C.CLEAR_ERROR)}function a(l){l.target&&(r.value=!r.value)}function c(){r.value=!1}return(l,i)=>{const m=E("router-link"),g=E("router-view");return u(),_(v,null,[o("nav",{class:"navbar is-warning",role:"navigation","aria-label":"main navigation",onClick:c},[o("div",ut,[h(m,{to:"/",class:"navbar-item"},{default:f(()=>[lt]),_:1}),d(e).state.user?(u(),_("div",_t,b(d(e).state.user.name),1)):L("",!0),o("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false",onClick:oe(a,["stop"])},ft,8,dt)]),h(ct,{open:r.value},null,8,["open"])]),d(s)?(u(),_("div",gt,[o("span",{onClick:n},"\xD7"),p(" "+b(d(s).message),1)])):L("",!0),o("section",{class:"section",onClick:c},[h(g)])],64)}}});const yt=t=>(re("data-v-71246241"),t=t(),ae(),t),bt=yt(()=>o("div",{class:"title is-4"},"Rezepte",-1)),$t={id:"recipes-list"},kt=["onClick"],Et=$({setup(t){const e=D(),s=S(),r=I(()=>{var c;const a=(c=e.state.dishes)==null?void 0:c.filter(l=>!l.alwaysOnList);return a==null?void 0:a.sort((l,i)=>l.name.localeCompare(i.name))});function n(a){s.push({name:"recipe",params:{id:a}})}return(a,c)=>{const l=E("o-icon");return u(),_(v,null,[bt,o("ul",$t,[(u(!0),_(v,null,F(d(r),i=>(u(),_("li",{key:i.id,onClick:()=>n(i.id)},[h(l,{icon:"utensils"}),p(" "+b(i.name),1)],8,kt))),128))])],64)}}});var Rt=w(Et,[["__scopeId","data-v-71246241"]]);const St={key:0},Ct={class:"title is-4"},wt=["src"],xt={class:"wrapper",id:"ingredient-list"},Dt={class:"number"},Ot=p("Zur\xFCck"),Lt=$({setup(t){const e=D(),s=ie(),r=S(),n=I(()=>e.state.dishes.find(i=>i.id===s.params.id));function a(){var i;return(i=n.value)==null?void 0:i.items.map(m=>{var g;return N(k({},(g=e.state.ingredients)==null?void 0:g.find(M=>M.id===m.id)),{amount:m.amount})})}function c(){r.push({name:"recipes"})}function l(i){return He(i.image)}return(i,m)=>d(n)?(u(),_("section",St,[o("div",Ct,b(d(n).name),1),d(n).image?(u(),_("img",{key:0,src:l(d(n))},null,8,wt)):L("",!0),o("div",xt,[(u(!0),_(v,null,F(a(),g=>(u(),_(v,{key:g.id},[o("span",Dt,b(g.amount),1),o("span",null,b(g.unit),1),o("span",null,b(g.name),1)],64))),128))]),o("p",null,b(d(n).recipe),1),h(R,{onClick:c},{default:f(()=>[Ot]),_:1})])):L("",!0)}});var It=w(Lt,[["__scopeId","data-v-43dbb0a0"]]);const Nt={},At=o("div",{class:"title is-4"},"Hast du dich verirrt?",-1),Tt=o("p",null,"Die angeforderte Seite existiert leider nicht.",-1),Ut=p("Bring mich in Sicherheit!");function Bt(t,e){const s=E("router-link");return u(),_(v,null,[At,Tt,h(s,{to:"/"},{default:f(()=>[Ut]),_:1})],64)}var zt=w(Nt,[["render",Bt]]),Ft=t=>{const e=We(()=>t.state.user,[he(7200),me(t)]),s=ce({history:ue("/homagix-frontend/"),routes:[{name:"home",path:"/",redirect:"/recipes"},{name:"recipes",path:"/recipes",component:Rt},{name:"recipe",path:"/recipes/:id",component:It},...e.routes,{path:"/:pathMatch(.*)*",component:zt}]});return s.beforeEach(e.beforeEach),s};le(vt).use(B).use(Ft(B)).use(_e,k({customIconPacks:{fas:{sizes:{default:"",small:"fa-sm",medium:"fa-lg",large:"fa-2x"}}},iconPack:"fas"},de.exports.bulmaConfig)).mount("#app");
